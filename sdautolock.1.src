.TH "SDAUTOLOCK" 1 "__DATE__" "__SOURCE__" "sdautolock Manual"
.
.SH NAME
sdautolock \- simple command to run screen locker
.
.SH SYNOPSIS
.B sdautolock
.I idle
.I time
.I locker
[\fI\,args\/\fR...]
.
.SH DESCRIPTION
.B sdautolock
runs
.I locker
when either
systemd is preparing to sleep,
when the session is locked,
or after a certain time elapses.
The program
.I idle
shall output how many milliseconds seconds have elapsed
out of the
.I time
seconds until the screen should automatically lock.
If
.I time
is zero,
.I idle
is never called.
.PP
.I locker
should close the file descriptor
.I SD_SLEEP_LOCK_FD
passed in the environment when it has locked the screen
and exit when the screen has been unlocked.
.I locker
will not be invoked again until the previous instance exits.
(In other words,
locking is idempotent.)
.PP
.I SIGUSR1
and
.I SIGUSR2
can be sent to respectively disable and enable timer based locking.
.
.SH EXAMPLE
The command below locks the screen with i3lock and its "ignore empty password" option after 3 minutes of inactivity on X11:
.EX
sdautolock xprintidle 180 i3lock -e
.EE
.I i3lock
closes
.I SD_SLEEP_LOCK_FD
as necessary (see NOTES).
.
.SH ENVIRONMENT
.I SD_SLEEP_LOCK_FD
is set in the locker program's environment and must be closed to allow the system to sleep.
.PP
.I XSS_SLEEP_LOCK_FD
is set equal to
.I SD_SLEEP_LOCK_FD
for compatibility with programs
(like i3lock)
that close it automatically.
.
.SH AUTHOR
Written by André Marçais.
.SH COPYRIGHT
Copyright \(co 2021 André Marçais.
Licensed under
.UR https://gnu.org/licenses/gpl.html
GPLv3
.UE .
.
.SH SEE ALSO
.BR i3lock (1),
.BR i3lock-color (1),
.BR xprintidle (1),
.BR systemd (1),
.BR org.freedesktop.login1 (5),
.BR xss-lock (1)
.
\" Local Variables:
\" mode: nroff
\" End:
